@model StudentExchange.Wiut.Web.ViewModels.CreateContactDetailsVM

<style>
    .form-section {
        display: none;
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

        .form-section h3 {
            margin-top: 0;
            font-weight: bold;
            color: #0b459f;
        }

        .form-section.active {
            display: block;
        }

        .form-section .form-group {
            margin-bottom: 20px;
        }

        .form-section .form-control {
            height: 40px;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
        }

        .form-section .btn {
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            background-color: #0b459f;
            color: #fff;
            cursor: pointer;
        }

            .form-section .btn:hover {
                background-color: #23527c;
            }

    #personal-details {
        border-color: #0b459f;
    }

    #contact-details {
        border-color: #0b459f;
    }

    #educational-details {
        border-color: #d9534f;
    }
</style>

<form asp-action="SaveContactDetails" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="StudentId" class="form-control"/>

    <div id="contact-details" class="form-section active">
        <h3>Contact details</h3>
        <hr />
        <h3>Permanent Home Address</h3>
        <!-- Add contact details fields here -->
        <div class="form-group">
            <label asp-for="Country">Country *</label>
            <select asp-for="Country" class="form-control form-select" id="country_contact" name="Country">
                <option value="" selected disabled></option>

                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $.ajax({
                        url: '/Students/GetCountries',
                        dataType: 'json',
                        success: function (response) {
                            var data = typeof response === 'string' ? JSON.parse(response) : response;
                            console.log(data);
                            $('#country_contact').empty();

                            var sortedKeys = Object.keys(data).sort(function (a, b) {
                                return data[a].localeCompare(data[b]);
                            });

                            for (var i = 0; i < sortedKeys.length; i++) {
                                var countryCode = sortedKeys[i];
                                var countryName = data[countryCode];
                                $('#country_contact').append('<option value="' + countryName + '">' + countryName + '</option>');
                            }
                        },
                        error: function (xhr, status, error) {
                            console.error("Error: " + error);
                        }
                    });
                </script>
            </select>
            <span asp-validation-for="Country" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="MobilePhoneNumber" class="control-label">Mobile / Cell phone number *</label>
            <input asp-for="MobilePhoneNumber" type="text" class="form-control" id="MobilePhoneNumber" name="MobilePhoneNumber" required>
            <span asp-validation-for="MobilePhoneNumber" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="OtherPhoneNumber">Other phone number</label>
            <input asp-for="OtherPhoneNumber" type="text" class="form-control" id="OtherPhoneNumber" name="OtherPhoneNumber">
        </div>
        <br />
        <br />
        <h3>Next of Kin Details</h3>
        <div class="form-group">
            <label asp-for="NextOfKinTitle">Title *</label>
            <select asp-for="NextOfKinTitle" class="form-control form-select" id="NextOfKinTitle" name="NextOfKinTitle">
                <option selected disabled></option>
                <option>Mr</option>
                <option>Miss</option>
                <option>Mrs</option>
                <option>Ms</option>
                <option>Dr</option>
                <option>Prof</option>
                <option>Gender Neutral</option>
            </select>
            <span asp-validation-for="NextOfKinTitle" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="NextOfKinForeName" class="control-label">Forename *</label>
            <input asp-for="NextOfKinForeName" type="text" class="form-control" id="NextOfKinForeName" name="NextOfKinForeName">
        </div>
        <div class="form-group">
            <label asp-for="NextOfKinSurName" class="control-label">Surname *</label>
            <input asp-for="NextOfKinSurName" type="text" class="form-control" id="NextOfKinSurName" name="NextOfKinSurName" required>
            <span asp-validation-for="NextOfKinSurName" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="Relationship">Relationship *</label>
            <select asp-for="Relationship" class="form-control form-select" id="Relationship" name="Relationship">
                <option selected disabled></option>
                <option>Child e.g. daughter/son</option>
                <option>Friend</option>
                <option>Grandparent</option>
                <option>Other</option>
                <option>Parent</option>
                <option>Partner e.g. husband/wife</option>
                <option>Sibling e.g. sister/brother</option>
            </select>
            <span asp-validation-for="Relationship" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="NextOfKinCountry">Country *</label>
            <select asp-for="NextOfKinCountry" class="form-control form-select" id="NextOfKinCountry" name="NextOfKinCountry">
                <option value="" selected disabled></option>

                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                <script>
                    $.ajax({
                        url: '/Students/GetCountries',
                        dataType: 'json',
                        success: function (response) {
                            var data = typeof response === 'string' ? JSON.parse(response) : response;
                            console.log(data);
                            $('#NextOfKinCountry').empty();

                            var sortedKeys = Object.keys(data).sort(function (a, b) {
                                return data[a].localeCompare(data[b]);
                            });

                            for (var i = 0; i < sortedKeys.length; i++) {
                                var countryCode = sortedKeys[i];
                                var countryName = data[countryCode];
                                $('#NextOfKinCountry').append('<option value="' + countryName + '">' + countryName + '</option>');
                            }
                        },
                        error: function (xhr, status, error) {
                            console.error("Error: " + error);
                        }
                    });
                </script>
            </select>
            <span asp-validation-for="NextOfKinCountry" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="NextOfKinMobilePhone" class="control-label">Mobile / Cell phone number *</label>
            <input asp-for="NextOfKinMobilePhone" type="text" class="form-control" id="NextOfKinMobilePhone" name="NextOfKinMobilePhone" required>
            <span asp-validation-for="NextOfKinMobilePhone" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="NextOfKinOtherPhone" class="control-label">Other phone number</label>
            <input asp-for="NextOfKinOtherPhone" type="text" class="form-control" id="NextOfKinOtherPhone" name="NextOfKinOtherPhone" required>
            <span asp-validation-for="NextOfKinOtherPhone" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="EmailAddress" class="control-label">Email address</label>
            <input asp-for="EmailAddress" type="text" class="form-control" id="EmailAddress" name="EmailAddress" required>
            <span asp-validation-for="EmailAddress" class="text-danger"></span>
        </div>
        <br /><br />
        <div class="d-flex">
            <p>*Denotes a mandatory field</p>
            <button type="submit" class="btn btn-primary" style="margin-left: 600px; width: 100px;">Save</button>
            <a asp-action="SaveEducationalDetails" asp-route-studentId="@Model.StudentId" class="btn btn-primary" style="margin-left: 100px; width: 100px;">Next</a>
        </div>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}